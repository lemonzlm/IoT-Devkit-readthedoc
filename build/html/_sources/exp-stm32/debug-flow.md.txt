# åŸºæœ¬è°ƒè¯•æµç¨‹

æœ‰æ—¶å€™æˆ‘ä»¬è¾›è¾›è‹¦è‹¦å†™å¥½çš„ç¨‹åºå¯èƒ½ä¼šè¿è¡Œå´©æºƒï¼Œæˆ–ä¸ç¬¦åˆé¢„æœŸğŸ’¢ğŸ’¢æˆ–è€…å•çº¯åœ°æƒ³è¦å»æŸ¥çœ‹ä¸€äº›å˜é‡ï¼Œè€Œ CLion é‡Œé¢æ˜¯æ”¯æŒå…¨åŠŸèƒ½çš„å•æ­¥æ–­ç‚¹è°ƒè¯•çš„ï¼Œä¹Ÿèƒ½åœ¨ä»£ç é‡Œç›´æ¥è§‚å¯Ÿå˜é‡çš„å€¼ï¼Œéå¸¸æ–¹ä¾¿~


## å®éªŒç›®çš„

æŒæ¡ CLion IDE çš„åŸºæœ¬è°ƒè¯•æµç¨‹

## å‡†å¤‡å·¥ä½œ

- å®Œæˆ IDE ç¯å¢ƒæ­å»º


- Ubuntu ä¸­å®‰è£… openocd


### ç¡¬ä»¶

- ç‰©è”ç½‘å®éªŒç®±

- èƒ½è¿è¡Œ Ubuntu20.04 çš„PC

### è½¯ä»¶

- Ubuntu20.04 é•œåƒæ–‡ä»¶
- STM32CubeMX
- VMware
- CLion

## ç›¸å…³ç”µè·¯åŸç†

LED2 çš„ä¸€ç«¯æ¥ GNDï¼Œå¦ä¸€ç«¯æ¥ STM32 çš„ GPIOï¼Œå½“ GPIO è®¾ç½®ä¸ºé«˜ç”µå¹³æ—¶ï¼Œç¯äº®ï¼Œåä¹‹ï¼Œç¯ç­ã€‚

![image-20220728154606991](debug-flow.assets/image-20220728154606991.png)

![image-20220728154710007](debug-flow.assets/image-20220728154710007.png)

## å¼•è„šå®šä¹‰ä¸ç›¸å…³API

- å¼•è„šå®šä¹‰ï¼šLED2 ä¸ STM32 çš„ PB14 ç›¸è¿
- ç›¸å…³ APIï¼šä¸ IDEç¯å¢ƒæ­å»º ç« èŠ‚ç›¸åŒ

## å®éªŒæ­¥éª¤

åœ¨ IDE ç¯å¢ƒæ­å»ºç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ªå·¥ç¨‹ï¼Œè¿™ä¸€ç« èŠ‚å°±åˆ©ç”¨è¿™ä¸ªå·¥ç¨‹æ¥å®ŒæˆåŸºæœ¬è°ƒè¯•æµç¨‹

### æ–­ç‚¹è°ƒè¯•

- æ‰“å¼€å·¥ç¨‹ï¼Œç”¨ USB çº¿è¿æ¥ STM32 ä¸ PCï¼Œç¨‹åºä¸ä¸Šä¸€ç« èŠ‚ä¿æŒä¸€è‡´

- åœ¨æ­¤å¤„æ‰“ä¸Šæ–­ç‚¹åï¼Œç‚¹å‡»å³ä¸Šè§’å¼€å§‹è°ƒè¯•

![image-20220729092711991](debug-flow.assets/image-20220729092711991.png)

![image-20220729093427714](debug-flow.assets/image-20220729093427714.png)

> :exclamation: æ³¨æ„
>
> åœ¨ keil ä¸­ï¼Œæ˜¯å…ˆå¼€å§‹è°ƒè¯•ï¼Œå†æ‰“æ–­ç‚¹ï¼Œè€Œåœ¨ CLion ä¸­ï¼Œéœ€è¦å…ˆæ‰“æ–­ç‚¹ï¼Œå†å¼€å§‹è°ƒè¯•ï¼Œè¿™ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œé¡ºåºä¸å°å¿ƒé”™äº†çš„åŒå­¦ä¼šå‡ºç°å¦‚å›¾æƒ…å†µï¼Œè§£å†³æ–¹æ³•æ˜¯é€€å‡ºè°ƒè¯•ï¼ˆç‚¹å‡»å³ä¸Šè§’çš„çº¢è‰²æ­£æ–¹å½¢æŒ‰é’®ï¼‰ï¼Œæ‰“ä¸Šæ–­ç‚¹ï¼Œå†å¼€å§‹è°ƒè¯•ã€‚
>
> ![image-20220729093743221](debug-flow.assets/image-20220729093743221.png)

### å˜é‡è§‚å¯Ÿ

- åœ¨æ­¤å¤„æ‰“ä¸Šæ–­ç‚¹åå¼€å§‹è°ƒè¯•ï¼Œç¨‹åºå°±ä¼šè¿è¡Œåˆ°æ­¤å¤„

![image-20220729094623896](debug-flow.assets/image-20220729094623896.png)

- ç‚¹å‡»æ­¥å…¥åï¼Œä¼šè·³è½¬åˆ°è¯¥å‡½æ•°å†…éƒ¨ï¼Œå¯è§‚å¯Ÿå˜é‡çš„å€¼

![image-20220729094820051](debug-flow.assets/image-20220729094820051.png)

è‡³æ­¤ï¼ŒåŸºæœ¬è°ƒè¯•æµç¨‹å·²ä»‹ç»å®Œæˆï¼Œæ›´è¯¦ç»†çš„å…³äºæ–­ç‚¹è°ƒè¯•ã€å˜é‡è§‚å¯Ÿã€GDBã€å†…å­˜è§†å›¾ç­‰åŠŸèƒ½è¯·è‡ªè¡Œäº†è§£ã€‚
